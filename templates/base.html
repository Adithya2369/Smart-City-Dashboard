<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart City Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    /* Palette + base */
    :root{
      --bg: #f4f8fb;
      --accent-1: #3490e2;
      --accent-2: #4a90e2;
      --accent-3: #3578e5;
      --muted: #6b7a90;
      --muted-2: #a1aab8;
      --card-bg: #ffffff;
      --radius: 12px;
    }
    html,body{height:100%;}
    body {
      background: var(--bg);
      font-family: 'Roboto', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin: 0;
      color: #172033;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Layout */
    .app {
      display: flex;
      min-height: 100vh;
      overflow: hidden;
    }

    /* Slim modern sidebar (Option A) */
    .sidebar {
      width: 78px;
      background: linear-gradient(180deg, rgba(74,144,226,0.06), transparent);
      border-right: 1px solid rgba(23,32,51,0.04);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 18px 8px;
      gap: 8px;
      position: relative;
    }
    .brand {
      width: 100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 8px 0 14px 0;
    }
    .brand .dot {
      width:38px;height:38px;border-radius:10px;
      display:flex;align-items:center;justify-content:center;
      background: linear-gradient(180deg, var(--accent-2), var(--accent-3));
      color: white;font-weight:700;
      font-size:30px;
      box-shadow: 0 6px 18px rgba(53,120,229,0.14);
    }
    .nav {
      margin-top: 6px;
      display:flex;
      flex-direction:column;
      gap:6px;
      width:100%;
      align-items:center;
    }
    .nav a {
      width:56px;
      height:56px;
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      color: var(--muted);
      text-decoration:none;
      font-size:13px;
      flex-direction:column;
      gap:6px;
      transition: all 0.15s ease;
      background: transparent;
      border: none;
      cursor: pointer;
    }
    .nav a .lbl { display:none; } /* labels hidden for slim layout */
    .nav a:hover {
      transform: translateY(-3px);
      color: var(--accent-2);
      background: rgba(74,144,226,0.08);
    }
    .nav a.active {
      background: linear-gradient(180deg, rgba(74,144,226,0.12), rgba(53,120,229,0.06));
      color: var(--accent-2);
      box-shadow: 0 8px 28px rgba(53,120,229,0.06);
    }

    /* tooltip text below icons on hover / focus */
    .nav a .tip {
      position: absolute;
      left: 92px;
      background: var(--card-bg);
      border-radius: 8px;
      padding: 8px 10px;
      box-shadow: 0 8px 20px rgba(23,32,51,0.06);
      color: var(--muted);
      font-size: 13px;
      display: none;
      white-space: nowrap;
    }
    .nav a:hover .tip, .nav a:focus .tip { display:block; }

    /* main content area */
    .main {
      flex: 1;
      padding: 24px 28px;
      overflow:auto;
    }

    /* top header row inside main */
    .topbar {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:18px;
    }
    .topbar .title {
      display:flex;
      flex-direction:column;
    }
    .topbar .title .h1 {
      font-size:20px;font-weight:700;color:var(--accent-1);
    }
    .topbar .title .muted {
      font-size:13px;color:var(--muted);
    }

    /* content cards */
    .grid {
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:16px;
    }
    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 6px 20px rgba(23,32,51,0.04);
    }
    .col-3 { grid-column: span 3; }
    .col-4 { grid-column: span 4; }
    .col-6 { grid-column: span 6; }
    .col-8 { grid-column: span 8; }
    .col-12 { grid-column: span 12; }

    .stat-title { font-weight:700;color:var(--muted); font-size:13px; margin:0 0 6px 0;}
    .stat-val { font-size:28px; font-weight:700; color:#142433; margin:0; }
    .muted-small { color:var(--muted); font-size:13px; }

    /* table styling */
    table { width:100%; border-collapse:collapse; font-size:14px; }
    thead th {
      text-align:left; padding:10px 12px; font-size:13px; color:var(--muted);
      border-bottom:1px solid rgba(23,32,51,0.06);
    }
    tbody td { padding:10px 12px; border-bottom:1px solid rgba(23,32,51,0.04); color:#1d2b3a; }

    /* responsive */
    @media (max-width:960px){
      .grid { grid-template-columns: repeat(6, 1fr); }
      .col-3{ grid-column: span 6; }
      .col-4{ grid-column: span 6; }
      .col-6{ grid-column: span 6; }
    }
    @media (max-width:720px){
      .sidebar { display:none; }
      .main { padding: 14px; }
    }

    /* utility */
    .tiny { font-size:12px; color:var(--muted); }
    .pill { display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(74,144,226,0.08); color:var(--accent-2); font-weight:600; font-size:13px; }

    /* footer */
    .footer {
      margin-top: 28px;
      color: var(--muted-2);
      font-size: 13px;
    }

    /* small helper for empty states */
    .empty {
      text-align:center;
      color:var(--muted);
      padding:28px;
    }

    /* search / controls */
    .controls { display:flex; gap:8px; align-items:center; }
    .btn {
      display:inline-flex; align-items:center; gap:8px; border:none; cursor:pointer;
      padding:10px 12px; border-radius:10px; font-weight:700;
      background:var(--accent-2); color:white;
      box-shadow: 0 8px 22px rgba(74,144,226,0.08);
      transition: transform .12s ease;
    }
    .btn:hover { transform: translateY(-2px); background:var(--accent-3); }

    /* small icon style */
    .icon {
      display:inline-block; font-size:18px; width:20px; text-align:center;
    }
  </style>
  {% block head %}{% endblock %}
</head>
<body>
  <div class="app">
    <!-- SIDEBAR -->
    <div class="sidebar" role="navigation" aria-label="Main navigation">
      <div class="brand" title="Smart City">
        <div class="dot">üèôÔ∏è</div>
      </div>

      <nav class="nav" aria-label="sections">
        <a href="{{ url_for('home') }}" class="{% if request.path == url_for('home') %}active{% endif %}">
          <div class="icon">üè†</div>
          <span class="lbl">Home</span>
          <div class="tip">Home</div>
        </a>

        <a href="{{ url_for('weather_live') }}" class="{% if request.path.startswith(url_for('weather_live')[:-5]) or request.path.startswith(url_for('weather_history')[:-8]) or request.path.startswith('/weather') %}active{% endif %}">
          <div class="icon">‚òÅÔ∏è</div>
          <span class="lbl">Weather</span>
          <div class="tip">Weather (live/history)</div>
        </a>

        <a href="{{ url_for('noise_live') }}" class="{% if request.path.startswith('/noise') %}active{% endif %}">
          <div class="icon">üîä</div>
          <span class="lbl">Noise</span>
          <div class="tip">Noise Compliance</div>
        </a>

        <a href="{{ url_for('waste_live') }}" class="{% if request.path.startswith('/waste') %}active{% endif %}">
          <div class="icon">üóëÔ∏è</div>
          <span class="lbl">Waste</span>
          <div class="tip">Waste Management</div>
        </a>

        <a href="{{ url_for('air_live') }}" class="{% if request.path.startswith('/air') %}active{% endif %}">
          <div class="icon">üå´Ô∏è</div>
          <span class="lbl">Air</span>
          <div class="tip">Air Quality</div>
        </a>

        <a href="{{ url_for('complaints') }}" class="{% if request.path.startswith('/complaints') %}active{% endif %}">
          <div class="icon">üí¨</div>
          <span class="lbl">Complaints</span>
          <div class="tip">Citizen Complaints</div>
        </a>
      </nav>

      <div style="flex:1"></div>

      <div style="width:100%; text-align:center; padding-bottom:8px;">
        <div class="tiny">Built with ‚ù§Ô∏è</div>
      </div>
    </div>

    <!-- MAIN -->
    <main class="main" role="main">
      <div class="topbar">
        <div class="title">
          <div class="h1">Smart City Dashboard</div>
          <div class="muted">Overview & monitoring</div>
        </div>

        <div class="controls">
          <!-- placeholder control -->
          <div class="tiny">Status: <span class="pill">Live</span></div>
        </div>
      </div>

      {% block content %}{% endblock %}

      <div class="footer">
          ¬© Smart City Dashboard ‚Ä¢ UI Palette by
          <i class="fab fa-github"></i> Adithya2369
      </div>
    </main>
  </div>

  <script>
    // No external libs ‚Äî small utility if needed in sub-templates
    // Add small keyboard shortcut: press "h" to go home
    document.addEventListener('keyup', function(e){
      if(e.key.toLowerCase() === 'h'){
        window.location.href = "{{ url_for('home') }}";
      }
    });
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>
